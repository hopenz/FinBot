# Проект: Telegram-bot для ведения личных финансов

## Команда: Петрушина Надежда, Овчинников Никита

### Задача №1
Реализовать скелет телеграмм-бота. Бот должен уметь:
* Идентифицировать пользователя (по tg id)
* Обеспечить возможность работы нескольких пользователей одновременно
* Показать справку по работе бота (/help)
* Записывать расходы ( - <Сумма> <Наименование> )
* Записывать доходы ( + <Сумма> <Наименование> )
* Показывать баланс (/balance)
* Показать список расходов (/expenses)
* Показать список доходов (/income)

В данной задаче не будет интеграции с Гугл-таблицами,
вместо этого будет реализация БД в оперативной памяти.

#### User-story 1:
***user:***  /start\
***bot:*** <Короткая инструкция по пользованию>\
***user:*** + 10000 Зарплата\
***bot:*** Операция добавлена в доходы!\
***user:*** - 1000 обед в Kong Fu\
***bot:*** Операция добавлена в расходы!\
***user:*** /balance\
***bot:*** Ваш баланс: 9000\
***user:*** /expenses\
***bot:*** Список расходов:\
&emsp;&emsp;Обед в Kong Fu 1000\
***user:*** /income\
***bot:*** Список доходов:\
&emsp;&emsp;Зарплата 10000


### Задача №2
1. Интегрировать бота с Google Sheets API:
   * Настроить аутентификацию и авторизацию для доступа к Google Sheets
   * Реализовать функции для чтения и записи данных в Google Sheets

2. tg id и ссылки на гугл-таблицу будут храниться в оперативной памяти.
3. Возможность выбора пользователем места хранения данных.

При старте бота должен быть предоставлен выбор пользователю, где он хочет хранить данные (оперативная память
/ гугл-таблица). Если он выбирает взаимодействовать с гугл таблицей, то бот попросит ссылку на созданную 
пользователем гугл таблицу и будет хранить данные в ней, в противном случае - все данные будут храниться 
в оперативной память. Также должна быть реализована возможность поменять место хранения (/changeDB), 
с переносом имеющихся данных.

Создавать таблицу пользователю нужно будет только один раз, дальше если он будет несколько раз менять варианты хранения, 
то будет использоваться ранее созданная таблица.

На данном этапе после добавления операции в доходы/расходы в личной гугл-таблице пользователя
должны появляться данные о введенных транзакциях. (Для варианта хранения: гугл таблицы)

Баланс будет высчитываться по формуле в гугл-таблице [Сумма доходов - сумма расходов] 
и храниться в ячейке этой таблицы. (Для варианта хранения: гугл таблицы)

#### User-story 2.1:
***user***: /start\
***bot***: Здравствуйте! Как вы хотите хранить данные?\
Гугл-таблица |  Оперативная память   (in-line кнопки)\
*Человек нажимает на гугл-таблица*\
***bot***: Помните, вы можете поменять способ хранения данных с помощью команды /changeDB\
***bot***: Давайте создадим таблицу и привяжем к ней бота:\
Для создания таблицы перейдите по ссылке https://sheets.new/ \
Добавьте Google Account Bot в качестве пользователя-редактора\
Пришлите мне ссылку на новую созданную таблицу (просто скопируйте и отправьте мне), остальное я сделаю сам\
***user***: *Ссылка на гугл-таблицу*\
***bot***: Создаю страницы документа, подготавливаю к работе …\
***user***: /changeDB\
***bot***: Теперь ваши данные хранятся в оперативной памяти!\

#### User-story 2.2:
***user***: /start\
***bot***: Здравствуйте! Как вы хотите хранить данные?\
Гугл-таблица |  Оперативная память   (in-line кнопки)\
*Человек нажимает на оперативную память*\
***bot***: Теперь ваши данные хранятся в оперативной памяти!\
***bot***: Помните, вы можете поменять способ хранения данных с помощью команды /changeDB\
***user***: /changeDB\
***bot***: Давайте создадим таблицу и привяжем к ней бота:\
Для создания таблицы перейдите по ссылке https://sheets.new/ \
Добавьте Google Account Bot в качестве пользователя-редактора\
Пришлите мне ссылку на новую созданную таблицу (просто скопируйте и отправьте мне), остальное я сделаю сам\
***user***: *Ссылка на гугл-таблицу*\
***bot***: Создаю страницы документа, подготавливаю к работе …

### Задача №3
1. Реализовать функционал категорий расходов. После введения расходов будет предложено выбрать категорию трат из
предложенных (взяли дефолтные, как в Сбербанке: перевод людям, супермаркет и т.д.).
Добавить команду вывода сумм расходов по категориям за текущий месяца (/allCatOfExp).
Добавить команду вывода расходов по конкретной категории за текущий месяца (/expensesByCat).
Выбор категории реализовать через in-line кнопки.
2. Реализация команды для создания лимита расходов на день (/limit <сумма>)
То есть при вводе этой команды, указывается лимит расходов на день. Когда пользователь вводит
сумму расхода, сумма расходов за день сравнивается с ранее указанным лимитов и в случае его
превышения пользователю отправляется соответствующее сообщение.
Сумма расходов за день обнуляется в 00:00.
3. Реализация команды удаления лимита на день (/dellimit).
При вводе команды удаляется установленный лимит на день.

#### User-story 3.1:
***user:***  - 33 проезд на трамвае\
***bot:*** Выберите категорию для данной транзакции:\
Перевод людям | Транспорт | Супермаркет |\
и т.д. (реализовано с помощью кнопок)\
*Человек нажимает на нужную ему категорию* (транспорт)\
***user:***  - 269 покупка в магните\
***bot:*** Выберите категорию для данной транзакции:\
Перевод людям | Транспорт | Супермаркет |\
и т.д. (реализовано с помощью кнопок)\
*Человек нажимает на нужную ему категорию* (супермаркет)\
***user:*** /allCatOfExp\
***bot:*** Транспорт - 33\
Супермаркет - 269\
…\
***user:*** /expensesByCat\
***bot:*** Выберите категорию для просмотра расходов:\
Перевод людям | Транспорт | Супермаркет |\
и т.д. (реализовано с помощью кнопок)\
*Человек нажимает на нужную ему категорию* (супермаркет)\
***bot:*** 269 - покупка в Магните\
…

#### User-story 3.2:
***user:*** /limit 5000\
***bot:*** Лимит расходов на день установлен.\
***user:*** - 1000 обед в Kong Fu\
***bot:*** Операция добавлена в расходы!\
***bot:*** Остаток на день: 4000\
***user:*** - 10000 покупка сумки\
***bot:*** Операция добавлена в расходы!\
***bot:*** Лимит расходов на день превышен!\
***bot:*** Сумма расходов за день составляет: 11000\



